{% load static %}
<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clínica Bosque Verde - Modificar Perfil</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
    <nav>
        <div class="logo-container">
            <img src="{% static 'assets/images/logo.jpeg' %}" alt="Logo Clínica Bosque Verde" class="logo">
            <a href="{% url 'index' %}" class="brand-name">Clínica Bosque Verde</a>        </div>
        <div class="hamburger">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <ul class="link-container">
            <li><a href="{% url 'index' %}">Inicio</a></li>
            <li><a href="{% url 'profesionales' %}">Profesional Acreditado</a></li>
            <li><a href="{% url 'pago' %}">Pago en Línea</a></li>
            <li><a href="{% url 'centro' %}">Centro Médico</a></li>
            <li><a href="{% url 'admision' %}">Admisión y Presupuestos</a></li>
            <li><a href="{% url 'galerias' %}">Galerías</a></li>
            {% if user.is_authenticated %}
            <li><span class="welcome-text">¡Hola, {{ user.first_name }} {{ user.last_name }}!</span>
            </li>
            <li><a href="{% url 'perfil' %}">Mi Perfil</a></li>
            <li><a href="{% url 'logout' %}">Cerrar Sesión</a></li>
            {% else %}
            <li><a href="{% url 'login' %}">Inicio de Sesión</a></li>
            <li><a href="{% url 'registro' %}">Registrarse</a></li>
            {% endif %}
        </ul>
        <a href="#" class="btn-reservar">Reservar Cita</a>
    </nav>

    {% include 'includes/messages.html' %}
    <div class="profile-container">
        <form id="perfilForm" method="POST">
            {% csrf_token %}

            <div class="mb-3">
                <label for="nombre" class="form-label">Nombre</label>
                <input type="text" class="form-control" id="nombre" value="{{ user.first_name }}" disabled>
                <div class="form-text">El nombre no se puede modificar.</div>
            </div>

            <div class="mb-3">
                <label for="apellidos" class="form-label">Apellidos</label>
                <input type="text" class="form-control" id="apellidos" value="{{ user.last_name }}" disabled>
                <div class="form-text">Los apellidos no se pueden modificar.</div>
            </div>

            <div class="mb-3">
                <label for="rut" class="form-label">RUT</label>
                <input type="text" class="form-control" id="rut" value="{{ rut_fijo }}" disabled>
                <div class="form-text">El RUT no se puede modificar.</div>
            </div>

            <div class="mb-3">
                <label for="rol" class="form-label">Rol</label>
                <input type="text" class="form-control" id="rol" value="{{ rol_fijo }}" disabled>
                <div class="form-text">El Rol no se puede modificar.</div>
            </div>

            <h5 class="mb-3">Información de Contacto (Editable)</h5>

            {% for field in perfil_form %}
            <div class="mb-3">
                <label for="{{ field.id_for_label }}" class="form-label">{{ field.label }} *</label>
                {{ field }}
                {% if field.errors %}
                <div class="error-message text-danger">{{ field.errors }}</div>
                {% endif %}
            </div>
            {% endfor %}

            <hr class="my-4">

            <h5 class="mb-3">Cambiar Contraseña</h5>

            <div class="mb-3">
                <label for="current-password" class="form-label">Contraseña Actual</label>
                <input type="password" class="form-control" id="current-password" name="current-password"
                    placeholder="Ingresa tu contraseña actual">
            </div>

            <div class="mb-3">
                <label for="new-password" class="form-label">Nueva Contraseña</label>
                <input type="password" class="form-control" id="new-password" name="new-password"
                    placeholder="Ingresa tu nueva contraseña">
            </div>

            <div class="mb-3">
                <label for="confirm-password" class="form-label">Confirmar Nueva Contraseña</label>
                <input type="password" class="form-control" id="confirm-password" name="confirm-password"
                    placeholder="Repite tu nueva contraseña">
            </div>

            <button type="submit" class="btn btn-primary">Guardar Cambios</button>
        </form>

    </div>

    <footer>
        <p>&copy; 2025 Clínica Bosque Verde</p>
    </footer>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'js/menu.js' %}"></script>
    <script src="{% static 'js/perfil.js' %}"></script>
</body>

</html>